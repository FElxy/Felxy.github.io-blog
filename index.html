<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/blog/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/blog/favicon.ico?v=5.1.0" />






<meta name="description" content="javascript, js, html, css">
<meta property="og:type" content="website">
<meta property="og:title" content="漫溯">
<meta property="og:url" content="https://felxy.github.io/blog/index.html">
<meta property="og:site_name" content="漫溯">
<meta property="og:description" content="javascript, js, html, css">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="漫溯">
<meta name="twitter:description" content="javascript, js, html, css">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://felxy.github.io/blog/"/>





  <title> 漫溯 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blog/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">漫溯</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://felxy.github.io/blog/blog/2017/06/01/DFS-BFS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rain">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="漫溯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/2017/06/01/DFS-BFS/" itemprop="url">
                  深度优先与广度优先方法对DOM树的遍历
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-01T18:39:05+08:00">
                2017-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://omoxed4yh.bkt.clouddn.com/1700602-dfs.png" alt="image"><br><blockquote><p>深度优先搜索算法（英语：Depth-First-Search，简称DFS）是一种用于遍历或搜索树或图的算法。沿着树的深度遍历树的节点，尽可能深的搜索树的分支。当节点v的所在边都己被探寻过，搜索将回溯到发现节点v的那条边的起始节点。这一过程一直进行到已发现从源节点可达的所有节点为止。如果还存在未被发现的节点，则选择其中一个作为源节点并重复以上过程，整个进程反复进行直到所有节点都被访问为止。属于盲目搜索。</p>
<footer><strong>wikipedia</strong><cite><a href="https://en.wikipedia.org/wiki/Depth-first_search" target="_blank" rel="external">en.wikipedia.org/wiki/Depth-first_search</a></cite></footer></blockquote></p>
<p><img src="http://omoxed4yh.bkt.clouddn.com/1700602-bfs.png" alt="image"><br><blockquote><p>广度优先搜索算法（英语：Breadth-First-Search，缩写为BFS），又译作宽度优先搜索，或横向优先搜索，是一种图形搜索算法。简单的说，BFS是从根节点开始，沿着树的宽度遍历树的节点。如果所有节点均被访问，则算法中止。广度优先搜索的实现一般采用open-closed表。</p>
<footer><strong>wikipedia</strong><cite><a href="https://en.wikipedia.org/wiki/Breadth-first_search" target="_blank" rel="external">en.wikipedia.org/wiki/Breadth-first_search</a></cite></footer></blockquote></p>
<p><code>DOM</code>的结构和数据结构中的“树”型结构比较类似，所以很自然的就可以使用<code>DFS</code>和<code>BFS</code>进行遍历。</p>
<p>深度优先可以理解为“一条路走到黑”，只有在撞到了“南墙”才回头。具体到<code>DOM</code>树中来说就是，从根节点开始，继而访问它的直接子元素，并依此往复直到不存在子元素。下面通过<code>JavaScript</code>使用了递归的方法实现了<code>DFS</code>，在控制台依次打印出节点的元素名，类名和层次<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> DFS = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!node) &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">let</span> deep = <span class="built_in">arguments</span>[<span class="number">1</span>] || <span class="number">1</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;node.nodeName&#125;</span>.<span class="subst">$&#123;node.classList&#125;</span>  <span class="subst">$&#123;deep&#125;</span>`</span>)</div><div class="line">    <span class="keyword">if</span> (!node.children.length) &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">Array</span>.from(node.children).forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> DFS(item, deep + <span class="number">1</span>))</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>广度优先可以理解为“一层一层的剥离”，对同一层次的元素全部遍历过后，再遍历下一层。广度优先适合使用队列这种数据结构来实现，将每层的节点依次放入队列，并根据队列“先入先出”的特性取出就可以了。在<code>JavaScript</code>中模拟队列的的方法可以使用数组方法的<code>push</code>和<code>shift</code>对应<code>入队</code>和<code>出队</code>操作。同样给出<code>JavaScript</code>实现的<code>DOM</code>树遍历<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> BFS = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span> (!root) &#123; <span class="keyword">return</span> &#125;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> queue = [&#123;</div><div class="line">        <span class="attr">item</span>: root,</div><div class="line">        <span class="attr">depth</span>: <span class="number">1</span></div><div class="line">    &#125;]</div><div class="line">    <span class="keyword">while</span> (queue.length) &#123;</div><div class="line">        <span class="keyword">let</span> node = queue.shift()</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;node.item.nodeName&#125;</span>.<span class="subst">$&#123;node.item.classList&#125;</span>  <span class="subst">$&#123;node.depth&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (!node.item.children.length) &#123;</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="built_in">Array</span>.from(node.item.children).forEach(<span class="function">(<span class="params">item, index, arr</span>) =&gt;</span> &#123;</div><div class="line">            queue.push(&#123;</div><div class="line">                <span class="attr">item</span>: item,</div><div class="line">                <span class="attr">depth</span>: node.depth + <span class="number">1</span></div><div class="line">            &#125;)</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在<code>BFS</code>实现时，打印出队元素的同时会将出队元素的直接子节点放入队列，因此在上面计算层次的时候，子节点的层次关系是由它的父级确定的。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://felxy.github.io/blog/blog/2017/05/17/array-methods/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rain">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="漫溯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/2017/05/17/array-methods/" itemprop="url">
                  JavaScript数组操作的一些方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-17T18:24:23+08:00">
                2017-05-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>数组的操作方法有很多，根据特性总的来说可以划分为三类，也就是</p>
<ul>
<li>Mutator 改变原数组对象值的方法</li>
<li>Accessor 不改变原数组对象带返回值的方法</li>
<li>Iteration 数组遍历的方法</li>
</ul>
<h1 id="修改原数组方法"><a href="#修改原数组方法" class="headerlink" title="修改原数组方法"></a>修改原数组方法</h1><h2 id="添加删除-pop-push-shift-unshift"><a href="#添加删除-pop-push-shift-unshift" class="headerlink" title="添加删除 pop, push, shift, unshift"></a>添加删除 pop, push, shift, unshift</h2><p>可以通过一个图来解释<br><img src="http://omoxed4yh.bkt.clouddn.com/170517-array.png" alt="image"><br>这些操作都会修改数组的<code>length</code>值。对于类数组，可以使用<code>apply</code>调用</p>
<h2 id="排序-reverse-sort"><a href="#排序-reverse-sort" class="headerlink" title="排序 reverse, sort"></a>排序 reverse, sort</h2><p><code>reverse</code>方法将数组前后位置颠倒，所以一种逆序字符串的方法可以写成<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> str = <span class="string">'hello'</span></div><div class="line">str.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>); <span class="comment">//'olleh'</span></div></pre></td></tr></table></figure></p>
<p><code>sort()</code> 方法提供了可选的规则对数组进行排序，默认会把元素按照转换为的字符串的每个字符的Unicode位点进行排序。<br>比如，<code>1,10,21,2</code>默认排序的结果为<code>1,10,2,21</code>。<br><code>sort()</code> 方法可以接收一个回调函数<code>callback(a, b)</code>用作设置比较规则，它的返回值的几种对应情况：</p>
<ul>
<li>小于 0, a 会被排列到 b 之前;</li>
<li>等于 0, a 和 b 的相对位置不变;</li>
<li>大于 0, b 会被排列到 a 之前。</li>
</ul>
<p>对于数字的比较也可以简单的使二者相减来实现升序排列：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">compareNumbers</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> a - b;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>而降序返回<code>b-a</code>即可。那么回到前面的数组，升序排列的函数使用ES6的话可以便捷的写成：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">2</span>].sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a-b);  <span class="comment">//[1,2,10,21]</span></div></pre></td></tr></table></figure></p>
<h2 id="splice"><a href="#splice" class="headerlink" title="splice"></a>splice</h2><p><code>splice()</code>可以删除、添加数组元素<br><div class="note info"><p><em>array.splice(start[, deleteCount, item1, item2, …])</em></p>
</div></p>
<p>可接收3个参数</p>
<ul>
<li>start​ 指定修改的开始位置。<ul>
<li>如果超出了数组的长度，则从数组末尾开始添加内容；</li>
<li>如果是负值，则表示从数组末位开始的第几位（从1计数）。</li>
</ul>
</li>
<li>deleteCount 表示要移除的数组元素的个数。<ul>
<li>如果 deleteCount 是 0，则不移除元素。</li>
<li>如果 deleteCount 大于start 之后的元素的总数，则从 start及后面的元素都将被删除。</li>
<li>如果deleteCount被省略，则其相当于(arr.length - start)。</li>
</ul>
</li>
<li>item1, item2, … 要添加进数组的元素,从start 位置开始。</li>
</ul>
<p><code>splice()</code>操作可以返回被删除元素的数组，如果没有删除则返回空数组<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">2</span>]</div><div class="line">arr.splice(<span class="number">2</span>, <span class="number">0</span>, <span class="number">32</span>) <span class="comment">// [1, 10, 32, 21, 2]</span></div><div class="line">arr.splice(<span class="number">-2</span>, <span class="number">0</span>, <span class="number">3</span>) <span class="comment">// [1, 10, 32, 3, 21, 2]</span></div><div class="line">arr.splice(<span class="number">3</span>, <span class="number">1</span>, <span class="number">43</span>) <span class="comment">// [1, 10, 32, 43, 21, 2]</span></div></pre></td></tr></table></figure></p>
<p>所以替换操作也就相当于是先删掉部分元素后再插入相同数量的元素</p>
<h2 id="填充-fill-copyWithin"><a href="#填充-fill-copyWithin" class="headerlink" title="填充 fill, copyWithin"></a>填充 fill, copyWithin</h2><p><code>fill</code>方法使用给定值，填充一个数组。<br><div class="note info"><p><em>arr.fill(value, start, end)</em></p>
</div></p>
<ul>
<li>value 填充值</li>
<li>start 填充起始位置</li>
<li>end 填充结束位置</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>)      <span class="comment">// [1, 4, 3]</span></div><div class="line"><span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="number">4</span>);            <span class="comment">// [4, 4, 4]</span></div><div class="line">[].fill.call(&#123;<span class="attr">length</span>: <span class="number">3</span>&#125;, <span class="number">4</span>) <span class="comment">// &#123;0: 4, 1: 4, 2: 4, length: 3&#125;</span></div></pre></td></tr></table></figure>
<div class="note info"><p><em>arr.copyWithin(target, start, end)</em></p>
</div>
<p>数组实例的<code>copyWithin</code>方法，在当前数组内部，将指定位置的成员复制到其他位置（会覆盖原有成员），然后返回当前数组。<br>它接受三个参数。</p>
<ul>
<li>target（必需）：从该位置开始替换数据。</li>
<li>start（可选）：从该位置开始读取数据，默认为0。如果为负值，表示倒数。</li>
<li>end（可选）：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示倒数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">-2</span>);      <span class="comment">// [1, 2, 3, 1, 2]</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>); <span class="comment">// [4, 2, 3, 4, 5]</span></div></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/blog/2017/05/17/array-methods/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://felxy.github.io/blog/blog/2017/05/16/curring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rain">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="漫溯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/2017/05/16/curring/" itemprop="url">
                  一个 JavaScript 柯里化问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-16T11:16:47+08:00">
                2017-05-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>起因是在群里有人问了一道题:<br><div class="note info"><p>实现如下功能：<code>var a = add(2)(3)(4);  // 9</code> </p>
</div>

后来有人给出了三个字答案----“柯里化”

维基百科中解释为:
<div class="note info"><p>在计算机科学中，柯里化（英语：Currying）是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。</p>
</div></p>
<p>上述问题的一种实现方式如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> add = <span class="function"><span class="params">x</span> =&gt;</span> &#123;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> sum = x</div><div class="line">    <span class="keyword">let</span> tem = <span class="function"><span class="params">y</span> =&gt;</span> &#123;</div><div class="line">        sum += y</div><div class="line">        <span class="keyword">return</span> tem</div><div class="line">    &#125;</div><div class="line">    tem.toString = tem.valueOf = <span class="function"><span class="params">()</span> =&gt;</span> sum</div><div class="line"></div><div class="line">    <span class="keyword">return</span> tem</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>那么为什么需要复写<code>toString</code>和<code>valueOf</code>呢？</p>
<p>在权威指南中是这样解释两种方法的：</p>
<div class="note info"><p><code>toString()</code>方法的作用是返回一个可以表示这个对象的字符串。在希望使用字符串的地方用到对象的话，JavaScript会自动调用这个方法，如果没实现这个方法，类会默认从<code>Object.prototype</code>中继承<code>toString()</code>方法，这个方法的结果是<code>[object object]</code>。<br><code>valueOf()</code>用来将对象转换为原始值。比如，当数学运算符（除了“+”运算符）和关系运算符作用域数字文本表示的对象时，会自动调用<code>valueOf()</code>方法。</p>
</div>
<p>未定义的<code>toString</code>或<code>valueOf</code>方法，返回的是tem声明的函数，而我们需要把对象转换成原始类型的值（数值、字符串和布尔值），因此需要重写两个方法使它返回需要的值。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://felxy.github.io/blog/blog/2017/04/14/socket-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rain">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="漫溯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/2017/04/14/socket-2/" itemprop="url">
                  WebSocket的应用实例
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-14T16:39:13+08:00">
                2017-04-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>因为大多数的应用实例都是聊天室，在这个基础上做个拓展，建立一个问答形式的应用。主要规则就是提出问题，并且问题必须是可以用“是”或者“不是”来回答的。</p>
<h2 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h2><p>提问和回答的人各有一个就足够了，所以这个问答聊天室应该是划分为多个房间。房间作为独立的一个功能，可以从业务逻辑中分离出来，所以在组件中新建一个room的模块<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Room = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.users = []</div><div class="line">    <span class="keyword">this</span>.ques = []</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Room</div></pre></td></tr></table></figure></p>
<p>房间的功能应该包括了：</p>
<ul>
<li>加入用户</li>
<li>移除用户</li>
<li>给房间中所有用户发送消息</li>
<li>添加问题</li>
<li>更新问题答案</li>
<li>其他</li>
</ul>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/blog/2017/04/14/socket-2/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://felxy.github.io/blog/blog/2017/04/13/socket-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rain">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="漫溯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/2017/04/13/socket-1/" itemprop="url">
                  WebSocket的学习及认识
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-13T13:59:59+08:00">
                2017-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Web应用的一般信息交换过程是客户端通过浏览器发出一个请求，服务器端接收和处理收到的请求并返回，然后客户端在浏览器中呈现出内容。也即是说一个request对应一个response请求，只有客户端主动发起才会获得服务端的返回信息，而服务端无法主动发送。</p>
<p>可是有什么用呢？</p>
<p>在一些场景里，我们有时会对应用的实时性要求比较高，类似于股票信息，设备监控，聊天室等等，这些都需要服务器能够主动的推送信息到客户端。使用传统的技术来解决这些问题的方案主要有轮询和comet，</p>
<ul>
<li>轮询是使用定时器周期性的向服务端发送请求，但是同样也会带来问题，首要的是如果服务器未更新信息而频繁的发送请求会增加服务器压力并造成资源的浪费，所以这是一种很低效的方式。</li>
<li>comet也是一种轮询，只是在服务器没有信息返回的时候会保持一段时间，直到数据、状态改变或者时间过期，通过这种机制来减少无效的客户端和服务器间的交互，但在比较频繁的交互过程里，这种方式并没有本质上的改变。</li>
</ul>
<p>HTML5 WebSocket的推出让浏览器和服务器之间可以建立无限制的通信，任何一方都可以主动发消息给对方。<br>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/blog/2017/04/13/socket-1/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://felxy.github.io/blog/blog/2017/03/20/drag-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rain">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="漫溯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/2017/03/20/drag-3/" itemprop="url">
                  拖放（三）：可拖放交换的组件块
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-20T22:45:31+08:00">
                2017-03-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="可拖放交换位置的widget组件"><a href="#可拖放交换位置的widget组件" class="headerlink" title="可拖放交换位置的widget组件"></a>可拖放交换位置的widget组件</h2><p>拖放排序可被应用的地方非常多，像标签页的排序，widget组件的互换位置，或者任意摆放的图片墙等等。</p>
<p>从过程上考虑，首先要能把目标元素给拖动起来(⊙_⊙)，之后检测与其他元素之间的距离执行交换，最后来释放掉目标元素。</p>
<p>如果是使用鼠标函数拖放的话，需要将可拖动的对象设定为绝对定位，这样能更方便的操作。因此基本上只要考虑以下几方面：</p>
<ul>
<li>重绘位置</li>
<li>距离检测</li>
<li>序列重排</li>
<li>拖放函数</li>
</ul>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/blog/2017/03/20/drag-3/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://felxy.github.io/blog/blog/2017/03/13/drag-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rain">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="漫溯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/2017/03/13/drag-2/" itemprop="url">
                  拖放（二）：鼠标事件实现拖放
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-13T22:39:02+08:00">
                2017-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <!-- ![image](http://omoxed4yh.bkt.clouddn.com/170313-caption.jpg)
*2017.02.25 黄山* -->
<p>原生的拖放事件（drag and drop）属于HTML5的接口，对它的兼容性可以通过<a href="http://caniuse.com/#search=drag%20and%20drop">caniuse</a>网站看到。</p>
<h2 id="拖放过程"><a href="#拖放过程" class="headerlink" title="拖放过程"></a>拖放过程</h2><p>根据拖放的过程来考虑，拖放的效果其实是实现元素对鼠标的跟随，将鼠标的坐标位移设置到元素上。<br>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/blog/2017/03/13/drag-2/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://felxy.github.io/blog/blog/2017/03/12/drag-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rain">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="漫溯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/2017/03/12/drag-1/" itemprop="url">
                  拖放（一）：原生drag and drop
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-12T14:56:25+08:00">
                2017-03-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <!-- ![image](http://omoxed4yh.bkt.clouddn.com/170312-caption.jpg)
*2016.10.07 明珠湖* -->
<h2 id="拖放流程"><a href="#拖放流程" class="headerlink" title="拖放流程"></a>拖放流程</h2><p>用户能够将一个可拖动元素移动到另一个可放置元素中，释放鼠标来应用这些改变。</p>
<p>拖放总的来说有三步: 鼠标按下、移动和释放</p>
<p><img src="http://omoxed4yh.bkt.clouddn.com/170312-step.png" alt="image"><br>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/blog/2017/03/12/drag-1/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  

          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/blog/images/avatar.gif"
               alt="Rain" />
          <p class="site-author-name" itemprop="name">Rain</p>
           
              <p class="site-description motion-element" itemprop="description">javascript, js, html, css</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/blog/archives">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rain</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  






<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  //id: '页面 ID', // 可选。默认为 location.href
  owner: 'felxy',
  repo: 'hexo_blog',
  oauth: {
    client_id: 'b0181be2db9a72a9faca',
    client_secret: '53c500a7812f0fffcbb41d34a8ca256d401ab98d',
  },
})
gitment.render('comments')
</script>


  
  

  

  

  

  


  

</body>
</html>
